import { takeAssociated, snapshot, destructor, LINKED } from '@glimmer/util';

import { clear } from './bounds';
export function asyncReset(parent, env) {
    var linked = takeAssociated(parent);
    if (linked) {
        env.didDestroy(snapshot(linked));
    }
}
export function asyncDestroy(parent, env) {
    if (false) {
        console.log('asyncDestroy', parent, LINKED.get(parent));
    }
    env.didDestroy(destructor(parent));
}
export function detach(parent, env) {
    if (false) {
        console.log('asyncClear', parent, LINKED.get(parent));
    }
    clear(parent);
    asyncDestroy(parent, env);
}
export function detachChildren(parent, env) {
    if (false) {
        console.log('asyncClear', parent, LINKED.get(parent));
    }
    asyncReset(parent, env);
    return clear(parent);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL3J1bnRpbWUvbGliL2xpZmV0aW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFNBQUEsY0FBQSxFQUFBLFFBQUEsRUFBQSxVQUFBLEVBQUEsTUFBQSxRQUFBLGVBQUE7O0FBRUEsU0FBQSxLQUFBLFFBQUEsVUFBQTtBQUtBLE9BQU0sU0FBQSxVQUFBLENBQUEsTUFBQSxFQUFBLEdBQUEsRUFBcUQ7QUFDekQsUUFBSSxTQUFTLGVBQWIsTUFBYSxDQUFiO0FBRUEsUUFBQSxNQUFBLEVBQVk7QUFDVixZQUFBLFVBQUEsQ0FBZSxTQUFmLE1BQWUsQ0FBZjtBQUNEO0FBQ0Y7QUFFRCxPQUFNLFNBQUEsWUFBQSxDQUFBLE1BQUEsRUFBQSxHQUFBLEVBQXVEO0FBQzNELFFBQUEsS0FBQSxFQUFXO0FBQ1QsZ0JBQUEsR0FBQSxDQUFBLGNBQUEsRUFBQSxNQUFBLEVBQW9DLE9BQUEsR0FBQSxDQUFwQyxNQUFvQyxDQUFwQztBQUNEO0FBRUQsUUFBQSxVQUFBLENBQWUsV0FBZixNQUFlLENBQWY7QUFDRDtBQUVELE9BQU0sU0FBQSxNQUFBLENBQUEsTUFBQSxFQUFBLEdBQUEsRUFBc0Q7QUFDMUQsUUFBQSxLQUFBLEVBQVc7QUFDVCxnQkFBQSxHQUFBLENBQUEsWUFBQSxFQUFBLE1BQUEsRUFBa0MsT0FBQSxHQUFBLENBQWxDLE1BQWtDLENBQWxDO0FBQ0Q7QUFFRCxVQUFBLE1BQUE7QUFDQSxpQkFBQSxNQUFBLEVBQUEsR0FBQTtBQUNEO0FBRUQsT0FBTSxTQUFBLGNBQUEsQ0FBQSxNQUFBLEVBQUEsR0FBQSxFQUF5RDtBQUM3RCxRQUFBLEtBQUEsRUFBVztBQUNULGdCQUFBLEdBQUEsQ0FBQSxZQUFBLEVBQUEsTUFBQSxFQUFrQyxPQUFBLEdBQUEsQ0FBbEMsTUFBa0MsQ0FBbEM7QUFDRDtBQUVELGVBQUEsTUFBQSxFQUFBLEdBQUE7QUFDQSxXQUFPLE1BQVAsTUFBTyxDQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0YWtlQXNzb2NpYXRlZCwgc25hcHNob3QsIGRlc3RydWN0b3IsIExJTktFRCB9IGZyb20gJ0BnbGltbWVyL3V0aWwnO1xuaW1wb3J0IHsgREVCVUcgfSBmcm9tICdAZ2xpbW1lci9sb2NhbC1kZWJ1Zy1mbGFncyc7XG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4vYm91bmRzJztcbmltcG9ydCB7IEJsb2NrT3Bjb2RlIH0gZnJvbSAnLi92bS91cGRhdGUnO1xuaW1wb3J0IHsgT3B0aW9uLCBCb3VuZHMsIEVudmlyb25tZW50IH0gZnJvbSAnQGdsaW1tZXIvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBTaW1wbGVOb2RlIH0gZnJvbSAnQHNpbXBsZS1kb20vaW50ZXJmYWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jUmVzZXQocGFyZW50OiBvYmplY3QsIGVudjogRW52aXJvbm1lbnQpIHtcbiAgbGV0IGxpbmtlZCA9IHRha2VBc3NvY2lhdGVkKHBhcmVudCk7XG5cbiAgaWYgKGxpbmtlZCkge1xuICAgIGVudi5kaWREZXN0cm95KHNuYXBzaG90KGxpbmtlZCkpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3luY0Rlc3Ryb3kocGFyZW50OiBvYmplY3QsIGVudjogRW52aXJvbm1lbnQpIHtcbiAgaWYgKERFQlVHKSB7XG4gICAgY29uc29sZS5sb2coJ2FzeW5jRGVzdHJveScsIHBhcmVudCwgTElOS0VELmdldChwYXJlbnQpKTtcbiAgfVxuXG4gIGVudi5kaWREZXN0cm95KGRlc3RydWN0b3IocGFyZW50KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRhY2gocGFyZW50OiBCbG9ja09wY29kZSwgZW52OiBFbnZpcm9ubWVudCkge1xuICBpZiAoREVCVUcpIHtcbiAgICBjb25zb2xlLmxvZygnYXN5bmNDbGVhcicsIHBhcmVudCwgTElOS0VELmdldChwYXJlbnQpKTtcbiAgfVxuXG4gIGNsZWFyKHBhcmVudCk7XG4gIGFzeW5jRGVzdHJveShwYXJlbnQsIGVudik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRhY2hDaGlsZHJlbihwYXJlbnQ6IEJvdW5kcywgZW52OiBFbnZpcm9ubWVudCk6IE9wdGlvbjxTaW1wbGVOb2RlPiB7XG4gIGlmIChERUJVRykge1xuICAgIGNvbnNvbGUubG9nKCdhc3luY0NsZWFyJywgcGFyZW50LCBMSU5LRUQuZ2V0KHBhcmVudCkpO1xuICB9XG5cbiAgYXN5bmNSZXNldChwYXJlbnQsIGVudik7XG4gIHJldHVybiBjbGVhcihwYXJlbnQpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==